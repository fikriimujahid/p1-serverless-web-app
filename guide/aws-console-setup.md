# ‚òÅÔ∏è AWS Console Manual Setup Guide

**Objective**: Perform the necessary one-time manual setup in the AWS Console to bootstrap your Infrastructure-as-Code (IaC) journey. This guide covers creating your administrative user, setting up the Terraform backend storage, and reference steps for role creation.

---

## üîπ Part 1: Create an Administrator IAM User
*Why?* You should never use your AWS Root account (email login) for daily tasks or local development. You need a dedicated Admin user.

### Steps:
1.  **Log in** to the [AWS Console](https://console.aws.amazon.com/) as your Root user.
2.  Search for and navigate to **IAM** (Identity and Access Management).
3.  On the left menu, click **Users** ‚Üí **Create user**.
4.  **User details**:
    *   **User name**: `terraform-admin` (or `[YourName]-admin`).
    *   Check **Provide user access to the AWS Management Console**.
    *   Select **I want to create an IAM user**.
    *   **Console password**: Choose "Custom password" and set one, or leave as Autogenerated.
    *   Uncheck "Users must create a new password at next sign-in" (Optional, for your convenience).
    *   Click **Next**.
5.  **Permissions**:
    *   Select **Attach policies directly**.
    *   In the search bar, type `AdministratorAccess`.
    *   Check the box next to the **AdministratorAccess** policy.
    *   *Note: This gives full control. Later, we will use Terraform to create restricted roles for specific tasks.*
    *   Click **Next**.
6.  **Review and Create**:
    *   Review details.
    *   Click **Create user**.
    *   **IMPORTANT**: Download the `.csv` file containing the password (if you chose autogenerated).

---

## üîπ Part 2: Generate Access Keys for CLI
*Why?* Your local Terraform tool needs programmatic keys (Access Key ID & Secret Access Key) to authenticate with AWS.

### Steps:
1.  In the IAM Users list, click on your newly created user (`terraform-admin`).
2.  Click the **Security credentials** tab.
3.  Scroll down to the **Access keys** section.
4.  Click **Create access key**.
5.  Select **Command Line Interface (CLI)**.
6.  Check the confirmation box ("I understand the above recommendation...").
7.  Click **Next** ‚Üí **Create access key**.
8.  **CRITICAL**: Copy the **Access key** and **Secret access key** immediately.
    *   OR click **Download .csv** file.
    *   *You will NOT be able to see the Secret key again after this screen closes.*
9.  Click **Done**.

### Configure Local CLI:
1.  Open your **Command Prompt** or **PowerShell**.
2.  Run the command:
    ```powershell
    aws configure
    ```
3.  Enter your credentials:
    *   **AWS Access Key ID**: [Paste your Access Key]
    *   **AWS Secret Access Key**: [Paste your Secret Key]
    *   **Default region name**: `us-east-1` (or your preferred region like `ap-southeast-1`). *Remember this region!*
    *   **Default output format**: `json`

---

## üîπ Part 3: Manual Terraform State Bootstrap
*Why?* Terraform needs a place to store the "State" of your infrastructure (to know what it created) and a "Lock" to prevent two people/processes from editing at the same time. This looks like the "Chicken & Egg" problem‚Äîwe create these manually so Terraform can use them.

### 1. Create S3 Bucket (Shared State Storage)
1.  Search for and navigate to **S3**.
2.  Click **Create bucket**.
3.  **Bucket Name**: `[project]-terraform-state-[random-suffix]`
    *   *Example*: `p1-notes-app-tf-state-fikri`
    *   *Note: S3 names must be globally unique across all of AWS.*
4.  **AWS Region**: Must match your CLI region (e.g., `us-east-1`).
5.  **Bucket Versioning**: Select **Enable**.
    *   *Why?* This allows us to recover the state file if it gets corrupted or deleted.
6.  **Default Encryption**: Ensure **Server-side encryption with Amazon S3 managed keys (SSE-S3)** is selected.
7.  Click **Create bucket**.

### 2. Create DynamoDB Table (Locking Mechanism)
1.  Search for and navigate to **DynamoDB**.
2.  Click **Create table**.
3.  **Table name**: `[project]-terraform-locks`
    *   *Example*: `p1-notes-app-terraform-locks`
4.  **Partition key**: Type `LockID` (Exact spelling, Case Sensitive).
    *   Select **String**.
5.  **Table settings**: Keep **Default settings**.
6.  Click **Create table**.

---

## üîπ Part 4: Manual Role Creation (Reference)
*Note: In our Phase 2 Terraform strategy, Terraform will AUTOMATICALLY create the necessary roles (`DeveloperRole`, etc.). You generally do NOT need to do this manually. However, here are the steps if you ever need to create a role yourself.*

### Steps to create an IAM Role:
1.  Navigate to **IAM** ‚Üí **Roles**.
2.  Click **Create role**.
3.  **Trusted entity type**:
    *   **AWS Service**: If the role is for a service like Lambda or EC2.
    *   **AWS Account**: If the role is for a User (like yourself) to "Assume".
    *   *Example*: Select **AWS account** ‚Üí **This account**.
4.  Click **Next**.
5.  **Add permissions**:
    *   Search for permissions policies (e.g., `AmazonDynamoDBFullAccess`).
    *   Check the box next to the policy.
6.  Click **Next**.
7.  **Name and Review**:
    *   **Role name**: Give it a descriptive name (e.g., `Manual-Admin-Role`).
    *   **Description**: Describe its purpose.
    *   Review the Trust Policy JSON (automatically generated based on Step 3).
8.  Click **Create role**.

---

## ‚úÖ Summary Checklist
By the end of this guide, you should have:
- [ ] An **Admin IAM User** (`terraform-admin`) created.
- [ ] **Access Keys** saved and configured locally (`aws configure`).
- [ ] An **S3 Bucket** created for Terraform State (Versioning Enabled).
- [ ] A **DynamoDB Table** created for Terraform Locks (Partition Key: `LockID`).

**Next Step**: Return to `guide/guide.md` and use the S3 Bucket Name and DynamoDB Table Name you just created to configure your `backend.tf` file.
